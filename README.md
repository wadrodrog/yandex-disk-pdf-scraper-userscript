# Yandex Disk PDF Scraper
Юзерскрипт для скачивания PDF из Яндекс Диска, на которых стоит защита от скачивания.

## Установка

Установите юзерскрипт в ваш менеджер скриптов:
https://github.com/wadrodrog/yandex-disk-pdf-scraper-userscript/raw/refs/heads/main/yandex-disk-pdf-scraper.user.js

Для Firefox лучше использовать [Greasemonkey](https://addons.mozilla.org/firefox/addon/greasemonkey).
Для Chromium лучше использовать [Tampermonkey](https://chromewebstore.google.com/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo).
На Safari пока не было протестировано, но там есть расширение [Userscripts](https://apps.apple.com/app/userscripts/id1463298887). Мобильные версии браузеров не тестировались.

## Использование

Юзерскрипт добавляет кнопку скачивания на боковую панель под кнопку "Создать".
Она открывает новую вкладку, в которой скачивает все страницы и формирует PDF.
По завершении процесса PDF сохраняется на компьютер.

Если кнопки скачивания нет, или скачивание не началось спустя несколько секунд, то перезагрузите страницу.
Если всё равно не работает, то либо скрипт не установился должным образом, либо обновление на стороне яндекса что-то сломало.

![Кнопка скачивания на боковой панели под кнопкой Создать](/assets/download_button.png)

## Обход капчи

В процессе скачивания Яндекс может закидывать вас капчами.

В скрипте реализован механизм, приостанавливающий скачивание, пока вы не решите капчу:
- Появляется окно с информацией о том, что надо пройти капчу.
- После него должна открыться капча в новой вкладке. Браузер может заблокировать её появление, разрешите в адресной строке.
Если не появилась, то просто откройте какую-нибудь страницу Яндекс Диска.
- После прохождения капчи вернитесь на вкладку скачивания и нажмите ОК.

Во время тестов в Chromium вкладка с капчей зависала, пока вы не закроете вкладку скачивания.
В Firefox такого поведения не обнаружилось, и капча открывалась нормально. Также в Firefox капчи появлялись намного реже, чем в Chromium.

Чтобы снизить шансы появления капчи, войдите в аккаунт Яндекса.

## Ограничения

- Страницы в PDF сохраняются как изображения. Как следствие, текст нельзя выделять и копировать. То же самое происходит и при просмотре в браузере - это ограничение со стороны Яндекса.
- Скачивание нескольких файлов одновременно может вызывать проблемы.

## Лицензия и благодарности

Скрипт опубликован по лицензии [Unlicense](https://unlicense.org).
Если вы нашли этот скрипт полезным и используете его где-либо ещё, просим указать ссылку на оригинальный репозиторий.

Похожий проект: https://colab.research.google.com/drive/1GY43-A2uFMahE9-zMH2-mFjPcq5w-mDa?usp=sharing
